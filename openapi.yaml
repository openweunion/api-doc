openapi: 3.1.0
info:
  version: 0.1.0
  title: WeUnion API
  description: |
    This API provides secure and programmable **offramp services**, allowing users to convert digital assets (e.g., USDC) into fiat currency and withdraw funds to their linked bank accounts.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
servers:
  - url: https://dev.weunion/api/v1

tags:
  - name: Authentication
    description: |
      This API requires all requests to be authenticated using a custom signature scheme.

      Each request must include the following headers:
      - `apikey`: Assigned API key.
      - `payload`: Base64-encoded JSON string containing the request body and a timestamp.
      - `signature`: HMAC-SHA512 hash of the payload, signed using your API secret.

      Payload structure:
      ```json
      {
        "body": { /* request body object */ },
        "timestamp": "unix-milliseconds"
      }
      ```

      Signature is calculated as:
      ```
      signature = HMAC_SHA512(payload, secret)
      ```

      The `timestamp` is used to prevent replay attacks. Clients should ensure it's current (Â±5 minutes).

  - name: VASP
    description: |
      VASP (Virtual Asset Service Provider) endpoints

  - name: Offramp Endpoints
    description: |
      Offramp endpoints

components:
  securitySchemes:
    ApiKeyAuth:
      type: apiKey
      in: header
      name: apikey

security:
  - ApiKeyAuth: []

paths:
  "/vasps/{vaspId}":
    $ref: paths/vasps_{vaspId}.yaml
  "/vasps/list":
    $ref: paths/vasps.yaml

  "/transactions/quote":
    $ref: paths/transactions_quote.yaml
  "/transactions/create":
    $ref: paths/transactions_create.yaml
  "/transactions/cancel":
    $ref: paths/transactions_cancel.yaml
  "/transactions/approve":
    $ref: paths/transactions_approve.yaml
  "/transactions/accept":
    $ref: paths/transactions_accept.yaml
  "/transactions/reject":
    $ref: paths/transactions_reject.yaml
  "/transactions/update":
    $ref: paths/transactions_update.yaml
  "/transactions/complete":
    $ref: paths/transactions_complete.yaml
  "/transactions/{transactionId}":
    $ref: paths/transactions_{transactionId}.yaml
  "/transactions/list":
    $ref: paths/transactions.yaml
