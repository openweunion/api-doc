openapi: 3.1.0
info:
  version: 0.1.0
  title: WeUnion API
  description: |
    This API provides secure and programmable **offramp services**, allowing users to convert digital assets (e.g., USDC) into fiat currency and withdraw funds to their linked bank accounts.
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
servers:
  - url: https://dev.offramp/api/v1

tags:
  - name: Authentication
    description: |
      This API requires all requests to be authenticated using a custom signature scheme.

      Each request must include the following headers:
      - `apikey`: Assigned API key.
      - `payload`: Base64-encoded JSON string containing the request body and a timestamp.
      - `signature`: HMAC-SHA512 hash of the payload, signed using your API secret.

      Payload structure:
      ```json
      {
        "body": { /* request body object */ },
        "timestamp": "unix-milliseconds"
      }
      ```

      Signature is calculated as:
      ```
      signature = HMAC_SHA512(payload, secret)
      ```

      The `timestamp` is used to prevent replay attacks. Clients should ensure it's current (Â±5 minutes).

  - name: VASP
    description: VASP Management

security:
  - custom_auth: []

components:
  securitySchemes:
    custom_auth:
      type: apiKey
      in: header
      name: apikey

paths:
  "/vasps/{vaspID}":
    $ref: paths/vasps_{vaspID}.yaml
  "/vasps":
    $ref: paths/vasps.yaml
